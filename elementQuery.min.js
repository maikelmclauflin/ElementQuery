!function(t,e){function n(t){var e,n=this,r=l(t);for(e in r)n[e]=r[e];return g(n),n}function r(t){var e=this;return this.reinit(t),e}var a={},s=a.hasOwnProperty,u=function(e,n,r){var i,a;if(n&&e){if(r||(r=t),s.apply(e,["length"])&&(a=1),a)for(i=0;i<e.length;i++)n.apply(r,[e[i],i,e]);if(!a)for(i in e)n.apply(r,[e[i],i,e])}return r},o=function(t,e,n){var r=new RegExp(e);return t.replace(r,n)},l=function(t){return{el:t,watchers:{},formerVals:{},currentValidQueries:{},annexes:[]}},c={height:{fn:function(t,e,n){return parseFloat(n.height)}},width:{fn:function(t,e,n){return parseFloat(n.width)}}},f={px:function(t){return t}},h=function(t,e){var n=t.split(e).length-1;return!!n},p=function(t){var e=t.match(/\-.*\~|\~\=/)[0];return e.slice(1,e.length-1)},m=function(t){var e=t.match(/\=(\"|\')(.*)(\"|\')/);return e[2]},d=function(t,e){var n,r,i=[];for(t=t.trim(),n=t.length-1;n>=0;n--)if(i.unshift(t[n]),r=i.join(""),e.indexOf(r)>=0)return"em"===r&&"r"===t[n-1]?"rem":r;return!1},v=function(t,e){var n=e.toString(),r=o(n.slice(1,n.length-1),"{{{}}}",t);return new RegExp(r,"mgi")},g=function(e){var n;n=function(){e.update(),t.requestAnimationFrame(n)}.bind(e),t.requestAnimationFrame(n)},y=/,?([^,\n]*)\[[\s\t]*(min|max)-({{{}}})[\s\t]*[~$\^]?=[\s\t]*(["|'](.*)["|'])[\s\t]*]([^\n\s\{]*)/,x=/\,?([[\s\t]*(min|max)-({{{}}})[\s\t]*[~$\^]?=[\s\t]*(["|'](.+?)["|'])[\s\t]*])/;f[""]=f.px,n.prototype={updateUI:function(t){var e,n,r=this,i=r.currentValidQueries[t],a=r.el;for(e in i)attrName=e+"-"+t,n=i[e],n&&(valuesLen=n.length,valuesLen&&a.setAttribute(attrName,n.join(" ")),valuesLen||a.removeAttribute(attrName));return r},update:function(){var e,n,r,i,a,s=this,u=s.watchers,o=s.formerVals,l=s.el,f=t.getComputedStyle(l),h=l.getBoundingClientRect(),p=parseFloat(h.height),m=parseFloat(h.width),d=[l,m,p,f,h],v=[];s.latestStyles=f,s.latestClientRect=h,s.latestHeight=p,s.latestWidth=m;for(e in u)n=c[e],r=o[e],i=n.fn.apply(s,d),i!==r&&(o[e]=i,v.push(e),s.calculateValues(e,i));for(e=0;e<v.length;e++)s.updateUI(v[e]),a=1;return a&&s.runAnnexes(),s},calculateValues:function(t,e){var n,r,i,a,s,u,o,l,h,p,m,d,v=this,g=v.el,y=v.watchers,x=v.latestStyles,w=v.latestClientRect,S=v.latestHeight,V=v.latestWidth;if(l=c[t],l.fn){m=y[t],h=l.fn,d={min:[],max:[]},a=[e,h,g,V,S,x,w];for(i in m){o=m[i],val=parseFloat(i);for(r in o)for(u=o[r],n=0;n<u.length;n++)s=u[n],p=f[s].apply(v,a),val<p&&"min"===r&&d[r].push(val+s),val>p&&"max"===r&&d[r].push(val+s)}v.currentValidQueries[t]=d}return v},hasWatcher:function(t){var e,n,r,i=this,a=i.watchers;if("object"==typeof t&&!Array.isArray(t))for(e in t)if(a=a[e])for(n in t[e])if(a=a[n])for(r in t[e][n])if(a[r])return 1;return 0},parseObject:function(t){var e,n,r,i,a,s=[],u={},o=p(t),l=u[o]={};r=m(t);for(e in f)s.push(e);return a=d(r,s),a||(a=""),i=l[r]={},h(t,"min-")&&(n="min"),h(t,"max-")&&(n="max"),i[n]=a,u},extendWatcher:function(t){var e,n,r,i,a=this,s=a.watchers;for(e in t){s[e]||(s[e]={}),a.formerVals[e]||(a.formerVals[e]=0/0),s=s[e];for(n in t[e]){s[n]||(s[n]={}),s=s[n];for(r in t[e][n])s[r]||(s[r]=[]),s=s[r],i=t[e][n][r],-1===s.indexOf(t[e][n][r])&&s.push(i)}}},add:function(t){var e,n=this;return e=n.parseObject(t),n.extendWatcher(e),n},annex:function(t){return this.annexes.push(t),this},runAnnexes:function(){var t,e=this;for(t=0;t<e.annexes.length;t++)e.annexes[t].apply(e);return e}},r.prototype={reinit:function(t){var e=this;return u(c,function(t,e){t.regex=v(e,y)}),t&&(e.styles=t),e.update(),e},update:function(){var t=this;return t.styles&&u(c,function(e){t.scanSelectors(e.regex,function(e,n){t.addRule(e,n)})}),t},scanSelectors:function(t,e){var n,r,i,a=this;u(a.styles,function(s){"object"==typeof s&&(i=s.rules||s.cssRules,u(i,function(i){n=i.selectorText,n&&(r=n.match(t),r&&u(r,function(t){e.apply(a,[t,n,i])}))}))})},addRule:function(t,n){var r,i,a,s,o,l,f,h=this;return f=n.split(t)[0]+t.replace(),l=[],o=[],u(c,function(e,n){if(s=v(n,x),i=f.match(s),a=t.match(s),i)for(r=0;r<i.length;r++)o.push(i[r]),f=f.split(i[r]).join("");if(a)for(r=0;r<a.length;r++)l.push(a[r])}),els=e.querySelectorAll(f),u(els,function(t){u(l,function(e){t instanceof HTMLElement&&h.attach(t,e)})}),h},attach:function(t,e){var n=this;return sensor=n.getSensor(t),sensor.add(e),n},getSensor:function(t){var e,r,i,a,s,u=this,o=t.toString();return u.watchers||(u.watchers={}),r=u.watchers,r[o]||(r[o]={}),i=r[o],i.els||(i.els=[]),i.sensors||(i.sensors=[]),e=i.els,s=i.sensors,a=e.indexOf(t),-1===a&&(a=e.length,e.push(t)),s[a]||(s[a]=new n(t)),s[a]},applySensorValues:function(){var t,e,n,r=this,a=r.watchers;for(t in a)for(e=a[t].sensors,i=0;i<e.length;i++)n=e[i],n.update();return r},unitProcessor:function(t,e){var n=this;return f[t]=e,n},addProcessor:function(t,e){var n=this;return c[t]={fn:e,regex:v(t,y)},n},physicalDistance:function(e){return function(n){return n/t.devicePixelRatio/e}}},t.ElementQuery=r,t.elementQuery=new t.ElementQuery}(window,document),window.elementQuery.reinit(document.styleSheets);